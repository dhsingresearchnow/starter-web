The apparent rout of the last Islamic State fighters touched off celebrations in Raqqa, where residents had lived under the repressive rule of militants who beheaded people for offenses as minor as smoking. Fighters could be seen cheering and firing celebratory gunfire in the streets, according to residents reached by phone and text message.